<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Kirana Store - Cart</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;family=Open+Sans:wght@400;600&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<style type="text/tailwindcss">
        body {
            font-family: 'Open Sans', sans-serif;
        }
        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: 'Poppins', sans-serif;
        }
        .btn-gradient {
            background-image: linear-gradient(to right, #FBBF24, #F59E0B);
            transition: all 0.3s ease;
        }
        .btn-gradient:hover {
            background-image: linear-gradient(to right, #F59E0B, #D97706);
            box-shadow: 0 4px 15px 0 rgba(251, 191, 36, 0.75);
        }
    </style>
</head>
<body class="bg-[#F8F5F2]">
<div class="bg-[#F8F5F2]">
<header class="sticky top-0 bg-white shadow-sm z-50">
<nav class="container mx-auto px-6 py-4 flex justify-between items-center">
<div class="flex items-center space-x-2">
<span class="material-symbols-outlined text-green-600 text-3xl">shopping_basket</span>
<div>
<a class="text-xl font-bold text-gray-800" href="index.html">Shree Baldigambar</a>
<p class="text-xs text-gray-500">General Store</p>
</div>
</div>
<div class="hidden md:flex items-center space-x-8">
<a class="text-gray-600 hover:text-green-600" href="index.html">Home</a>
<a class="text-gray-600 hover:text-green-600" href="product.html">Products</a>

<a class="text-gray-600 hover:text-green-600" href="index.html#about">About</a>
<a class="text-gray-600 hover:text-green-600" href="index.html#contact">Contact</a>
</div>
<div class="flex items-center space-x-4">
<a class="text-green-600 font-semibold" href="cart.html">
<span class="material-symbols-outlined">shopping_cart</span>
</a>
<a class="flex items-center text-gray-600 hover:text-green-600" href="login.html" id="loginLink">
<span class="material-symbols-outlined mr-1" >login</span> Login
            </a>

            <div class="relative" id="profileMenu" style="display:none;">
  <button id="profileIcon" class="flex items-center focus:outline-none">
    <span class="material-symbols-outlined text-green-600 text-3xl">account_circle</span>
  </button>
  <div id="profileDropdown" class="absolute right-0 mt-2 w-40 bg-white border border-gray-200 rounded-lg shadow-lg hidden">
    <button id="logoutBtn" class="block w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100">Log Out</button>
  </div>
</div>
</div>
<div class="md:hidden">
<button class="text-gray-600 hover:text-green-600 focus:outline-none">
<span class="material-symbols-outlined">menu</span>
</button>
</div>
</nav>
</header>
<main class="container mx-auto px-6 py-12">
<div class="mb-8">
<h1 class="text-4xl font-bold text-gray-800">Your Cart</h1>
<p class="text-gray-600">Review your items and proceed to checkout.</p>
</div>
<div class="grid lg:grid-cols-3 gap-12">
<div class="lg:col-span-2">
<div class="bg-white rounded-lg shadow-md p-6">
<div class="hidden md:grid grid-cols-5 gap-4 mb-4 pb-4 border-b border-gray-200">
<h3 class="font-semibold text-gray-600 col-span-2">Product</h3>
<h3 class="font-semibold text-gray-600 text-center">Quantity</h3>
<h3 class="font-semibold text-gray-600 text-right">Price</h3>
<h3 class="font-semibold text-gray-600 text-right">Total</h3>
</div>
  <div id="cartItems"></div>
  </div>
  </div>
<div class="lg:col-span-1">
  
<div class="bg-white rounded-lg shadow-md p-6 sticky top-28">
<h2 class="text-2xl font-bold text-gray-800 mb-6 border-b pb-4">Order Summary</h2>
<div class="space-y-4 text-gray-600">
<div class="flex justify-between" >
<span id="subtotal">â‚¹0</span>
<!-- <span class="font-semibold text-gray-800">â‚¹460.00</span> -->
</div>
<div class="flex justify-between">
<span>Discount</span>
<span class="font-semibold text-gray-800">-â‚¹20.00</span>
</div>
<div class="flex justify-between">
<span>Delivery Charges</span>
<span class="font-semibold text-gray-800">Free</span>
</div>
</div>
<div class="mt-6 pt-6 border-t border-gray-200">
<div class="flex justify-between items-center">
<span class="text-lg font-bold text-gray-800" id="total">â‚¹0</span>
<!-- <span class="text-2xl font-bold text-green-600">â‚¹440.00</span> -->
</div>
</div>
<!-- Proceed to Checkout Button (stays in order summary) -->
<button id="checkoutBtn" 
  class="btn-gradient w-full text-white font-bold py-3 px-8 rounded-lg mt-8 flex items-center justify-center">
  Proceed to Checkout
  <span class="material-symbols-outlined ml-2">arrow_forward</span>
</button>

<!-- Order Modal -->
<div id="orderModal" 
     class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-50 z-50">
  <div class="bg-white p-6 rounded-lg shadow-lg w-96 text-center relative z-60">
    <h2 class="text-xl font-bold mb-4">Order Confirmation</h2>
    <p class="mb-4">âœ… Your order has been received and will be processed shortly!</p>
    <!-- OK Button INSIDE the modal -->
    <button id="closeModalBtn" 
      class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">OK</button>
  </div>
</div>

</button>
</div>
</div>
</div>
</main>
</div>
<footer class="bg-gray-800 text-white mt-16">
<div class="container mx-auto px-6 py-10">
<div class="grid grid-cols-1 md:grid-cols-4 gap-8">
<div>
<h3 class="font-bold text-lg mb-4">Kirana Store</h3>
<p class="text-gray-400">Your one-stop shop for all daily needs. Fresh, fast, and friendly.</p>
</div>
<div>
<h3 class="font-bold text-lg mb-4">Quick Links</h3>
<ul>
<li class="mb-2"><a class="text-gray-400 hover:text-white" href="index.html#about">About Us</a></li>
<li class="mb-2"><a class="text-gray-400 hover:text-white" href="index.html#contact">Contact</a></li>
<li class="mb-2"><a class="text-gray-400 hover:text-white" href="#">FAQ</a></li>
<li class="mb-2"><a class="text-gray-400 hover:text-white" href="#">Privacy Policy</a></li>
</ul>
</div>
<div>
<h3 class="font-bold text-lg mb-4">Contact Us</h3>
<p class="text-gray-400 flex items-center mb-2"><span class="material-symbols-outlined mr-2">location_on</span> 123 Grocery Lane, Mumbai, IN</p>
<p class="text-gray-400 flex items-center mb-2"><span class="material-symbols-outlined mr-2">phone</span> +91 12345 67890</p>
<p class="text-gray-400 flex items-center"><span class="material-symbols-outlined mr-2">email</span> support@kiranastore.com</p>
</div>
<div>
<h3 class="font-bold text-lg mb-4">Follow Us</h3>
<div class="flex space-x-4">
<a class="text-gray-400 hover:text-white" href="#"><svg aria-hidden="true" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
<path clip-rule="evenodd" d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z" fill-rule="evenodd"></path>
</svg></a>
<a class="text-gray-400 hover:text-white" href="#"><svg aria-hidden="true" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
<path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"></path>
</svg></a>
<a class="text-gray-400 hover:text-white" href="#"><svg aria-hidden="true" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
<path clip-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 012.153 1.257 4.902 4.902 0 011.257 2.153c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.257 2.153 4.902 4.902 0 01-2.153 1.257c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.013-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-2.153-1.257 4.902 4.902 0 01-1.257-2.153c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.257-2.153A4.902 4.902 0 016.08 2.465c.636-.247 1.363.416 2.427-.465C9.53 2.013 9.884 2 12.315 2zM12 7a5 5 0 100 10 5 5 0 000-10zm0 8a3 3 0 110-6 3 3 0 010 6zm6.406-11.845a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z" fill-rule="evenodd"></path>
</svg></a>
</div>
</div>
</div>
<div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-500">
<p>Â© 2025 Shree Baldigambar. All Rights Reserved.</p>
</div>
</div>
</footer>



<script type="module">
  // Import Firebase modules
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import {
    getAuth,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // Your Firebase configuration (same as login.html)
  const firebaseConfig = {
    apiKey:"AIzaSyCzW3juEFHQc--r7M_5FjSun-LOktRTAlg",
    authDomain: "general-store-website.firebaseapp.com",
    projectId: "general-store-website",
    storageBucket: "general-store-website.firebasestorage.app",
    messagingSenderId: "385213164157",
    appId: "1:385213164157:web:178224f78178b3a15c1f14"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // DOM elements for profile menu
  const profileMenu = document.getElementById('profileMenu');
  const profileIcon = document.getElementById('profileIcon');
  const profileDropdown = document.getElementById('profileDropdown');
  const logoutBtn = document.getElementById('logoutBtn');

  // Toggle dropdown when clicking the icon
  profileIcon?.addEventListener('click', () => {
    profileDropdown.classList.toggle('hidden');
  });

  // Logout button
  logoutBtn?.addEventListener('click', () => {
    signOut(auth).then(() => {
      alert('You have logged out.');
      window.location.href = 'login.html';
    });
  });

  onAuthStateChanged(auth, (user) => {
  const profileMenu = document.querySelector('#profileMenu');
  const loginLink = document.querySelector('a[href="login.html"]');

  if (user) {
    profileMenu.style.display = 'block';
    if (loginLink) loginLink.style.visibility = 'hidden';
  } else {
    profileMenu.style.display = 'none';
    if (loginLink) loginLink.style.visibility = 'visible';
  }
});

 onAuthStateChanged(auth, (user) => {
    if (!user) {
      // Not logged in â†’ send to login page
      window.location.href = "login.html";  
    } else {
      console.log('User logged in:', user.email);
      // You can safely run your cart/product rendering code here
    }
  });





/* -------------------- CART LOGIC -------------------- */
const CART_KEY = 'kiranastore_cart_v1';

function loadCart() {
  try { return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); } catch(e) { return []; }
}

function saveCart(cart) {
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
}

function renderCart() {
  const container = document.getElementById('cartItems');
  if (!container) return; // if not on cart page, skip
  const cart = loadCart();
  container.innerHTML = '';

  if (cart.length === 0) {
    container.innerHTML = '<p class="text-gray-600">Your cart is empty.</p>';
    if (document.getElementById('subtotal')) document.getElementById('subtotal').textContent = 'â‚¹0';
    if (document.getElementById('total')) document.getElementById('total').textContent = 'â‚¹0';
    return;
  }

  let subtotal = 0;

  cart.forEach(item => {
    const total = item.price * item.qty;
    subtotal += total;

    const row = document.createElement('div');
    row.className = 'grid grid-cols-1 md:grid-cols-5 gap-4 items-center mb-6';
    row.innerHTML = `
      <div class="flex items-center col-span-2">
        <img src="${item.image}" 
     alt="${item.name}" 
     class="w-20 h-20 object-cover rounded-lg mr-4"/>

        <p class="font-semibold text-gray-800">${item.name}</p>
      </div>
      <div class="flex items-center justify-center">
        <div class="flex items-center border border-gray-300 rounded-md">
          <button class="px-3 py-1" data-action="decrease" data-id="${item.id}">-</button>
          <input class="w-12 text-center border-0" type="text" value="${item.qty}" readonly/>
          <button class="px-3 py-1" data-action="increase" data-id="${item.id}">+</button>
        </div>
      </div>
      <p class="text-right">â‚¹${item.price}</p>
      <p class="text-right font-bold">â‚¹${total}</p>
      <button class="text-gray-400 hover:text-red-500" data-action="delete" data-id="${item.id}">
        <span class="material-symbols-outlined">delete</span>
      </button>
    `;
    container.appendChild(row);
  });

  if (document.getElementById('subtotal')) document.getElementById('subtotal').textContent = `â‚¹${subtotal}`;
  if (document.getElementById('total')) document.getElementById('total').textContent = `â‚¹${subtotal-20}`;
}

// Listen for +, -, delete
document.addEventListener('click', e => {
  const btn = e.target.closest('button[data-action]');
  if (!btn) return;
  const id = btn.dataset.id;
  const cart = loadCart();
  const item = cart.find(i => i.id === id);
  if (!item) return;

  if (btn.dataset.action === 'increase') item.qty++;
  if (btn.dataset.action === 'decrease' && item.qty > 1) item.qty--;
  if (btn.dataset.action === 'delete') cart.splice(cart.indexOf(item),1);

  saveCart(cart);
  renderCart();
});

document.addEventListener('DOMContentLoaded', renderCart);


// Buttons
const checkoutBtn = document.getElementById('checkoutBtn');
const orderModal = document.getElementById('orderModal');
const closeModal = document.getElementById('closeModalBtn');

checkoutBtn.addEventListener('click', () => {
  const cart = loadCart();

  if (cart.length === 0) {
    // Cart empty
    alert('ðŸ›’ Your cart is empty. Please add items before checkout.');
    return;
  }

  // Show modal
     orderModal.classList.remove('hidden'); // show modal
    orderModal.classList.add('flex'); // ensure it's flex for centering
  });


 closeModalBtn.addEventListener('click', () => {
    orderModal.classList.add('hidden');
    orderModal.classList.remove('flex');
  });

  orderModal.addEventListener('click', (event) => {
    if (event.target === orderModal) {
      orderModal.classList.add('hidden');
      orderModal.classList.remove('flex');
    }

    localStorage.removeItem(CART_KEY);
renderCart();

  });



 
</script>





</body></html>